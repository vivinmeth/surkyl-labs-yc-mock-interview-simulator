<!DOCTYPE html>
<html lang="en">
<head>
<title>YC Mock Interview • Surkyl</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" type="text/css" href="assets/styles/style.NWPDX9Fh.css" />
<link rel="icon" type="image/png" href="https://assets.muesync.com/common/images/labs-logo.png" />

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
<script type="text/javascript" src="assets/scripts/functions.NWPDX9Fh.js"></script>
<script type="text/javascript">
// Timer variables
var timer = 30;
var currentQuestionTime = 30;
var masterTimer = 600; // 10 minutes in seconds
var masterTimerInterval = null;

// Question tracking
var totalQuestions = 0;
var answeredQuestions = 0;
var q = [];
var tips = [];
var isFirstQuestion = true;
var interviewFailed = false;
var interviewStartTime = null;

// First question constant
var FIRST_QUESTION = "What are you working on?";

// Load data from YAML file
async function loadData() {
	try {
		const response = await fetch('assets/data/data.yml');
		const yamlText = await response.text();
		const data = jsyaml.load(yamlText);
		
		q = data.questions || [];
		tips = data.tips || [];
		
		// Remove "What are you working on?" and similar variations from the pool
		q = q.filter(function(question) {
			var normalized = question.toLowerCase().trim();
			return normalized !== "what are you working on?" && 
				   normalized !== "so what are you working on?" &&
				   normalized !== "what are you working on";
		});
		
		// Randomise Questions & Tips
		q.sort(function() {return 0.5 - Math.random()});
		tips.sort(function() {return 0.5 - Math.random()});
		
		// Prepend the first question (always the same)
		q.unshift(FIRST_QUESTION);
		
		totalQuestions = q.length;
		
		// End Questions marker
		q.push('done');
		
		// Load attempt history
		loadAttemptHistory();
		
		// Initialize the app
		interviewStartTime = Date.now();
		next_q();
		timer_tick();
		start_master_timer();
		display_tip();
		updateProgress();
		
		// Hide loading state
		$('.loading-overlay').fadeOut(300);
		
	} catch (error) {
		console.error('Failed to load data:', error);
		$('#question').html('Failed to load questions. Please refresh the page.');
	}
}

// Master timer (10 minutes)
function start_master_timer() {
	update_master_timer_display();
	masterTimerInterval = setInterval(function() {
		if (interviewFailed) return;
		
		masterTimer--;
		update_master_timer_display();
		
		if (masterTimer <= 0) {
			clearInterval(masterTimerInterval);
			end_interview(true); // Time's up - but they completed the interview time
		}
	}, 1000);
}

function update_master_timer_display() {
	var minutes = Math.floor(masterTimer / 60);
	var seconds = masterTimer % 60;
	var display = minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
	$('#master-timer').text(display);
	
	// Warning states for master timer
	if (masterTimer <= 60) {
		$('#master-timer').addClass('timer-critical');
	} else if (masterTimer <= 120) {
		$('#master-timer').addClass('timer-low');
	}
}

function end_interview(success) {
	if (interviewFailed) return;
	
	interviewFailed = true;
	clearInterval(masterTimerInterval);
	
	var attempt = {
		timestamp: interviewStartTime,
		questionsAnswered: answeredQuestions,
		totalTime: 600 - masterTimer,
		passed: success,
		failReason: success ? null : 'timeout'
	};
	
	saveAttempt(attempt);
	
	if (success) {
		// Show success screen
		$('#question-container').addClass('hide');
		$('#timer-container').addClass('hide');
		$('.pg').addClass('hide');
		$('.tip-container').addClass('hide');
		$('.controls').addClass('hide');
		$('#end').removeClass('hide');
		updateEndScreen(attempt);
	} else {
		// Show failure screen
		show_failure_screen(attempt);
	}
}

function show_failure_screen(attempt) {
	$('#question-container').addClass('hide');
	$('#timer-container').addClass('hide');
	$('.pg').addClass('hide');
	$('.tip-container').addClass('hide');
	$('.controls').addClass('hide');
	
	$('#fail-questions-answered').text(attempt.questionsAnswered);
	$('#fail-time-elapsed').text(formatTime(attempt.totalTime));
	
	$('#failed').removeClass('hide');
}

function updateEndScreen(attempt) {
	$('#end-questions-answered').text(attempt.questionsAnswered);
	$('#end-time-elapsed').text(formatTime(attempt.totalTime));
}

function formatTime(seconds) {
	var mins = Math.floor(seconds / 60);
	var secs = seconds % 60;
	return mins + 'm ' + secs + 's';
}

// LocalStorage functions
function saveAttempt(attempt) {
	var attempts = JSON.parse(localStorage.getItem('yc_interview_attempts') || '[]');
	attempts.push(attempt);
	localStorage.setItem('yc_interview_attempts', JSON.stringify(attempts));
	updateAttemptCounter();
}

function loadAttemptHistory() {
	updateAttemptCounter();
}

function updateAttemptCounter() {
	var attempts = JSON.parse(localStorage.getItem('yc_interview_attempts') || '[]');
	var totalAttempts = attempts.length;
	var passedAttempts = attempts.filter(function(a) { return a.passed; }).length;
	
	$('#attempt-count').text('Attempt #' + (totalAttempts + 1));
	if (totalAttempts > 0) {
		$('#attempt-stats').text(passedAttempts + '/' + totalAttempts + ' passed').removeClass('hide');
	}
}

$(document).ready(function(){
	loadData();
});

$(document).keypress(function(e) {
	if (interviewFailed) return;
	
	switch (e.which)
	{
		case 13:
			// Next Question - Return (13)
			if (q.length > 0 && !interviewFailed) next_q();
			break;

		case 32:
			// Next Question - Space (32)
			e.preventDefault();
			if (q.length > 0 && !interviewFailed) next_q();
			break;

		case 110:
			// Easter Egg
			$('body').append('<div class="egg"><iframe width="420" height="315" src="http://www.youtube.com/embed/QH2-TGUlwu4?autoplay=1" frameborder="0" allowfullscreen></iframe></div>');
			break;
	}
});

// Handle Escape key for canceling attempt
$(document).keydown(function(e) {
	if (e.which === 27 && !interviewFailed) {
		// ESC key - cancel attempt
		cancel_attempt();
	}
});

function cancel_attempt() {
	interviewFailed = true;
	clearInterval(masterTimerInterval);
	
	$('#question-container').addClass('hide');
	$('#timer-container').addClass('hide');
	$('.pg').addClass('hide');
	$('.tip-container').addClass('hide');
	$('.controls').addClass('hide');
	
	$('#canceled').removeClass('hide');
}

function updateProgress() {
	var progress = (answeredQuestions / totalQuestions) * 100;
	$('.progress-fill').css('width', progress + '%');
	$('.progress-text').text(answeredQuestions + ' / ' + totalQuestions);
}
</script>

</head>
<body>

<!-- Loading Overlay -->
<div class="loading-overlay">
	<div class="loading-content">
		<div class="loading-spinner"></div>
		<p>Loading questions...</p>
	</div>
</div>

<!-- Background Effects -->
<div class="bg-gradient"></div>
<div class="bg-grid"></div>

<!-- Header -->
<header class="header">
	<div class="logo">
		<img src="https://assets.muesync.com/common/images/labs-logo.png" alt="Surkyl Labs"  width="32" height="32"/>
		<span>YC Interview Simulator</span>
	</div>
	<div class="header-center">
		<div class="master-timer-container">
			<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
				<circle cx="12" cy="12" r="10"/>
				<polyline points="12 6 12 12 16 14"/>
			</svg>
			<span id="master-timer">10:00</span>
		</div>
		<div class="attempt-info">
			<span id="attempt-count">Attempt #1</span>
			<span id="attempt-stats" class="hide"></span>
		</div>
	</div>
	<a href="https://surkyl.com" target="_blank" rel="noopener" class="header-badge">
		by Surkyl Labs
		<img src="https://assets.muesync.com/common/images/labs-logo.png" alt="Surkyl Labs"  width="18" height="18"/>
	</a>
</header>

<!-- Progress Bar -->
<div class="progress-bar">
	<div class="progress-fill"></div>
	<span class="progress-text">0 / 0</span>
</div>

<!-- Main Content -->
<main class="main-content">
	
	<!-- Message to be Displayed when out of questions or time's up (Success) -->
	<div id="end" class="hide">
		<div class="end-content">
			<div class="end-icon success">
				<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
					<polyline points="22 4 12 14.01 9 11.01"/>
				</svg>
			</div>
			<h1>Congratulations!</h1>
			<div class="result-stats">
				<div class="stat">
					<span class="stat-value" id="end-questions-answered">0</span>
					<span class="stat-label">Questions Answered</span>
				</div>
				<div class="stat">
					<span class="stat-value" id="end-time-elapsed">0m 0s</span>
					<span class="stat-label">Time Elapsed</span>
				</div>
			</div>
			<p class="success-message">You successfully completed your mock interview! You answered every question within the time limit. Best of luck with your actual YC interview - you've got this!</p>
			<div class="success-actions">
				<button class="btn-restart" onclick="location.reload()">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<polyline points="23 4 23 10 17 10"/>
						<path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
					</svg>
					Start New Attempt
				</button>
			</div>
		</div>
	</div>
	
	<!-- Interview Failed Screen -->
	<div id="failed" class="hide">
		<div class="end-content">
			<div class="end-icon failed">
				<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<circle cx="12" cy="12" r="10"/>
					<line x1="15" y1="9" x2="9" y2="15"/>
					<line x1="9" y1="9" x2="15" y2="15"/>
				</svg>
			</div>
			<h1>Interview Failed</h1>
			<div class="result-stats">
				<div class="stat">
					<span class="stat-value" id="fail-questions-answered">0</span>
					<span class="stat-label">Questions Answered</span>
				</div>
				<div class="stat">
					<span class="stat-value" id="fail-time-elapsed">0m 0s</span>
					<span class="stat-label">Time Elapsed</span>
				</div>
			</div>
			<p>You ran out of time on a question. In a real YC interview, you need to answer quickly and concisely. Practice more!</p>
			<button class="btn-restart" onclick="location.reload()">
				<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<polyline points="23 4 23 10 17 10"/>
					<path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
				</svg>
				Try Again
			</button>
		</div>
	</div>
	
	<!-- Interview Canceled Screen -->
	<div id="canceled" class="hide">
		<div class="end-content">
			<div class="end-icon canceled">
				<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<path d="M18 6L6 18M6 6l12 12"/>
				</svg>
			</div>
			<h1>Attempt Canceled</h1>
			<p class="joke-text">Do not worry, brighter people than you have tried and failed. Come back and try again any time!</p>
			<button class="btn-restart" onclick="location.reload()">
				<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<polyline points="23 4 23 10 17 10"/>
					<path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
				</svg>
				Try Again
			</button>
		</div>
	</div>

	<!-- Question Display -->
	<div id="question-container">
		<div class="question-label">
			<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
				<circle cx="12" cy="12" r="10"/>
				<path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
				<line x1="12" y1="17" x2="12.01" y2="17"/>
			</svg>
			Question
		</div>
		<div id="question">&nbsp;</div>
	</div>

	<!-- Timer -->
	<div id="timer-container">
		<div class="timer-ring">
			<svg viewBox="0 0 100 100">
				<circle class="timer-bg" cx="50" cy="50" r="45"/>
				<circle class="timer-progress" cx="50" cy="50" r="45"/>
			</svg>
			<div id="timer">20</div>
		</div>
		<div class="timer-label">seconds remaining</div>
	</div>

	<!-- Disappointed Paul Graham -->
	<div class="pg hide">
		<div class="pg-overlay">
			<img src="assets/images/pg.jpg" alt="Paul Graham is disappointed" />
			<p>Time's up! Paul Graham is disappointed.</p>
		</div>
	</div>

</main>

<!-- Tips Display -->
<div class="tip-container">
	<div class="tip">
		<div class="tip-icon">
			<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
				<circle cx="12" cy="12" r="10"/>
				<line x1="12" y1="16" x2="12" y2="12"/>
				<line x1="12" y1="8" x2="12.01" y2="8"/>
			</svg>
		</div>
		<div class="tip-content">
			<strong>Pro Tip</strong>
			<span id="tip">&nbsp;</span>
		</div>
	</div>
</div>

<!-- Keyboard Controls -->
<div class="controls">
	<div class="control-item">
		<kbd>Enter</kbd>
		<span>or</span>
		<kbd>Space</kbd>
		<span>Answer & next question</span>
	</div>
</div>

<!-- Footer -->
<footer class="footer">
	<div class="footer-left">
		v1 by <a href="https://jamescun.com/" target="_blank" rel="noopener">James Cunningham</a> & <a href="https://bio.link/colinhayhurst" target="_blank" rel="noopener">Colin Hayhurst</a> • Enhanced by <a href="https://surkyl.com" target="_blank" rel="noopener">Surkyl Labs</a> Team
	</div>
	<div class="footer-center">
		&copy; 2024 Surkyl. All rights reserved.
	</div>
	<div class="footer-right">
		<span class="app-name">YC Interview Simulator</span>
		<span class="version-tag">v2.0</span>
	</div>
</footer>

</body>
</html>
